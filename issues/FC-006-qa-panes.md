# FC-006: qa1/qa2ペイン対応

## 背景
FC-005でdev2/dev3ペインが実装完了し、開発者ペインの基盤が確立されました。次のフェーズとして、品質保証専用のqa1/qa2ペインを実装し、テスト観点でのClaude対話を実現します。

## 目的
1. qa1/qa2ペインでQA専用プロンプトを用いたClaude Code対話を実現する
2. テスト戦略、バグ検出、品質向上に特化したエージェント機能を提供する
3. dev1-3との独立したセッション管理でクラッシュ分離を維持する

## 作業内容
- [ ] **UIレイアウト拡張**: qa1/qa2ペインへのTextView配置とキーバインド (Ctrl+X 4, 5) 追加
- [ ] **QA専用プロンプト設定**: システムプロンプトにQA観点の役割定義実装
  ```
  システムプロンプト: "あなたは品質保証の専門家です。
  テスト戦略、バグ検出、品質向上に焦点を当ててください。
  コードレビュー、テストケース設計、境界値分析を重視してください。"
  ```
- [ ] **SessionManager拡張**: `createSession "qa1"`, "qa2"対応ロジック追加
- [ ] **Worker起動機能**: 各ペインで独立Workerプロセス起動、環境変数 `CLAUDE_ROLE=qa` 付与
- [ ] **統合テスト**: dev1-3, qa1-2の同時起動・独立動作確認
- [ ] **QA機能検証**: テストケース生成、バグレポート作成のユースケーステスト

## 受け入れ基準
- [ ] qa1/qa2で同時にQA観点の入力→応答サイクルが完了する
- [ ] CPU/メモリ使用量がdev1-3時 +30%以内に収まる (5ペイン同時実行)
- [ ] QA専用プロンプトが正常に機能し、テスト観点の回答を生成する
- [ ] 各ペインのクラッシュ分離が維持される (ProcessSupervisor統合)
- [ ] qa1-2間での会話の混線が発生しない

## 実装パターン (FC-005準拠)
### 1. UI拡張 (Program.fs)
- qa1/qa2ペイン用TextView追加
- キーバインド追加: Ctrl+X 4(qa1), Ctrl+X 5(qa2)
- 自動起動機能をqa1-2に拡張

### 2. セッション管理 (ClaudeCodeProcess.fs)
- CLAUDE_ROLE=qa環境変数設定
- qa1/qa2用セッション作成・管理ロジック
- WorkerProcessManagerとの統合

### 3. プロセス分離
- qa1/qa2用独立Workerプロセス起動
- ProcessSupervisor経由での監視・復旧機能
- IPC通信による安全なセッション制御

## リソース設計
- **CPU使用率**: qa1-2追加で+2-3%想定 (テスト負荷考慮)
- **メモリ使用量**: +300-400MB想定 (各Claude Codeインスタンス)
- **プロセス数**: +2 (qa1/qa2 Worker)

## 参照
- `docs/ui_layout.md` - QA役割定義・レイアウト詳細
- `docs/process-architecture.md` - プロセス分離・監視設計
- `issues/FC-005-dev2-dev3.md` - 実装パターン参考

---
**担当**: @biwakonbu
**見積**: 1.5 人日
**優先度**: 🟨 中 
**依存**: FC-005完了