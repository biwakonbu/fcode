# fcode ã‚°ãƒ©ãƒ³ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³

**ç›®çš„**: Claude Codeçµ±åˆTUIã‚¨ãƒ‡ã‚£ã‚¿ã®å…¨ä½“è¨­è¨ˆã¨å®Ÿè£…æ–¹é‡ã®ç¢ºå®š

## 1. ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“åƒ

### 1.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    fcode ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹                      â”‚
â”‚                 (F# + Terminal.Gui 1.15.0)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚UIç®¡ç†       â”‚ â”‚ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ â”‚ â”‚ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†â”‚ â”‚è¨­å®šç®¡ç†     â”‚ â”‚
â”‚ â”‚ãƒ»ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ â”‚ â”‚ãƒ»Emacsé¢¨    â”‚ â”‚ãƒ»æ°¸ç¶šåŒ–     â”‚ â”‚ãƒ»JSON       â”‚ â”‚
â”‚ â”‚ãƒ»9ãƒšã‚¤ãƒ³    â”‚ â”‚ãƒ»ãƒãƒ«ãƒã‚­ãƒ¼ â”‚ â”‚ãƒ»å¾©æ—§       â”‚ â”‚ãƒ»ç’°å¢ƒå¤‰æ•°   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                 ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ãƒ»ç®¡ç†å±¤                        â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ProcessSupervisorâ”‚ â”‚HealthCheck â”‚ â”‚AutoRecovery â”‚ â”‚IPC Manager  â”‚ â”‚
â”‚ â”‚ãƒ»ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•   â”‚ â”‚ãƒ»ãƒãƒ¼ãƒˆãƒ“ãƒ¼ãƒˆâ”‚ â”‚ãƒ»è‡ªå‹•å†èµ·å‹•  â”‚ â”‚ãƒ»Named Pipesâ”‚ â”‚
â”‚ â”‚ãƒ»çŠ¶æ…‹ç›£è¦–      â”‚ â”‚ãƒ»å¿œç­”æ€§ç›£è¦–  â”‚ â”‚ãƒ»çŠ¶æ…‹å¾©å…ƒ   â”‚ â”‚ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚ ãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ (IPC)
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚             â”‚             â”‚             â”‚             â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”     â”Œâ”€â”€â”€â–¼â”€â”€â”€â”     â”Œâ”€â”€â”€â–¼â”€â”€â”€â”     â”Œâ”€â”€â”€â–¼â”€â”€â”€â”     â”Œâ”€â”€â”€â–¼â”€â”€â”€â”
â”‚Claude â”‚     â”‚Claude â”‚     â”‚Claude â”‚     â”‚Claude â”‚     â”‚Claude â”‚
â”‚Worker1â”‚     â”‚Worker2â”‚     â”‚Worker3â”‚     â”‚Worker4â”‚     â”‚Worker5â”‚
â”‚(conv) â”‚     â”‚(dev1) â”‚     â”‚(dev2) â”‚     â”‚(dev3) â”‚     â”‚(qa1)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”
â”‚Claude â”‚     â”‚Claude â”‚     â”‚Claude â”‚     â”‚Claude â”‚
â”‚Worker6â”‚     â”‚Worker7â”‚     â”‚Worker8â”‚     â”‚Worker9â”‚
â”‚(qa2)  â”‚     â”‚(ux)   â”‚     â”‚(pm)   â”‚     â”‚(pdm)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯ç¢ºå®š

| å±¤ | æŠ€è¡“ | ç†ç”± |
|---|---|---|
| **UIå±¤** | Terminal.Gui 1.15.0 | ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã€å®‰å®šæ€§ã€è±Šå¯Œãªæ©Ÿèƒ½ |
| **è¨€èª** | F# (.NET 8) | é–¢æ•°å‹ã€å‹å®‰å…¨æ€§ã€éåŒæœŸå‡¦ç†ã€ãƒ‘ã‚¿ãƒ¼ãƒ³ãƒãƒƒãƒ |
| **ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†** | System.Diagnostics.Process | .NETæ¨™æº–ã€ä¿¡é ¼æ€§ |
| **IPC** | Named Pipes (Windows) / Unix Domain Sockets (Linux/macOS) | é«˜æ€§èƒ½ã€ä¿¡é ¼æ€§ |
| **è¨­å®šç®¡ç†** | System.Text.Json | .NETæ¨™æº–ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ |
| **ãƒ­ã‚°** | è‡ªä½œè»½é‡ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ  | ä¾å­˜é–¢ä¿‚æœ€å°åŒ– |

## 2. UIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­è¨ˆ

### 2.1 ç”»é¢åˆ†å‰²æˆ¦ç•¥

```
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” 160x40æ¨å¥¨
â”‚ ä¼šè©± â”‚  dev1     â”‚   dev2    â”‚  dev3     â”‚ â†‘
â”‚ 60åˆ— â”‚  ã‚·ãƒ‹ã‚¢   â”‚  ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ â”‚  ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ â”‚ â”‚ 16è¡Œ
â”‚ å›ºå®š â”‚  æ‰¹åˆ¤çš„   â”‚  ä¸¦åˆ—ä½œæ¥­  â”‚  ä¸¦åˆ—ä½œæ¥­  â”‚ â”‚ (40%)
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â†“
â”‚      â”‚  qa1      â”‚   qa2     â”‚  ux       â”‚ â†‘
â”‚      â”‚  ãƒ†ã‚¹ãƒˆ   â”‚  ãƒ’ãƒ¥ãƒ¼ãƒª  â”‚  ãƒ¦ãƒ¼ã‚¶ãƒ¼  â”‚ â”‚ 16è¡Œ
â”‚      â”‚  ãƒªãƒ¼ãƒ‰   â”‚  ã‚¹ãƒ†ã‚£ãƒƒã‚¯ â”‚  ä¸­å¿ƒè¨­è¨ˆ  â”‚ â”‚ (40%)
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â†“
â”‚      â”‚         PM / PdM çµ±åˆç®¡ç†          â”‚ â†‘ 8è¡Œ
â”‚      â”‚    é€²æ—ç®¡ç† / è¦ä»¶ãƒ»å¸‚å ´åˆ†æ        â”‚ â”‚ (20%)
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â†“
```

### 2.2 ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

| ç”»é¢ã‚µã‚¤ã‚º | ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ | å‚™è€ƒ |
|---|---|---|
| **160x40ä»¥ä¸Š** | æ¨™æº–9ãƒšã‚¤ãƒ³ | æœ€é©è¡¨ç¤º |
| **120x30-159x39** | ç¸®å°ç‰ˆï¼ˆPM/PdMçµ±åˆï¼‰ | å®Ÿç”¨ç¯„å›² |
| **120x30æœªæº€** | è­¦å‘Šè¡¨ç¤º | ä½¿ç”¨ä¸æ¨å¥¨ |

### 2.3 ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ 

```fsharp
// Terminal.Gui ColorSchemeå®šç¾©
let colorSchemes = 
    [|
        ("conversation", Color.Blue, Color.White)      // ä¼šè©±: é’åœ°/ç™½æ–‡å­—
        ("dev", Color.DarkGreen, Color.Gray)           // é–‹ç™º: ç·‘ç³»
        ("qa", Color.DarkYellow, Color.Black)          // QA: é»„ç³»  
        ("ux", Color.DarkCyan, Color.White)            // UX: ã‚·ã‚¢ãƒ³ç³»
        ("pm", Color.DarkMagenta, Color.White)         // ç®¡ç†: ãƒã‚¼ãƒ³ã‚¿ç³»
    |]
```

## 3. ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 3.1 è¨­è¨ˆåŸå‰‡

1. **å®Œå…¨åˆ†é›¢**: ãƒ¡ã‚¤ãƒ³TUIãƒ—ãƒ­ã‚»ã‚¹ã¨Claude Codeã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã®ç‹¬ç«‹æ€§
2. **ãƒ•ã‚©ãƒ«ãƒˆãƒˆãƒ¬ãƒ©ãƒ³ãƒˆ**: å€‹åˆ¥ãƒ—ãƒ­ã‚»ã‚¹ç•°å¸¸ãŒå…¨ä½“ã«æ³¢åŠã—ãªã„
3. **è‡ªå‹•å¾©æ—§**: ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–ã¨è‡ªå‹•å†èµ·å‹•
4. **ã‚»ãƒƒã‚·ãƒ§ãƒ³æ°¸ç¶šæ€§**: tmuxãƒ©ã‚¤ã‚¯ãªãƒ‡ã‚¿ãƒƒãƒ/ã‚¢ã‚¿ãƒƒãƒæ©Ÿèƒ½

### 3.2 ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†æˆ¦ç•¥

```fsharp
// ProcessSupervisor.fs - æ ¸å¿ƒå®Ÿè£…
type WorkerProcess = {
    PaneId: string
    Role: string  
    Process: Process option
    LastHeartbeat: DateTime
    Status: ProcessStatus
    RestartCount: int
}

type ProcessStatus = 
    | Starting
    | Running  
    | Unhealthy
    | Crashed
    | Stopped

// ç›£è¦–é–“éš”
let HealthCheckInterval = TimeSpan.FromSeconds(2.0)
let MaxRestartAttempts = 3
let RestartCooldown = TimeSpan.FromSeconds(5.0)
```

### 3.3 IPCé€šä¿¡è¨­è¨ˆ

```fsharp
// ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‹å®šç¾©
type IPCMessage = 
    | StartClaude of PaneId: string
    | StopClaude of PaneId: string  
    | SendPrompt of PaneId: string * Prompt: string
    | ReceiveResponse of PaneId: string * Response: string
    | Heartbeat of PaneId: string
    | StatusUpdate of PaneId: string * Status: ProcessStatus

// é€šä¿¡ãƒãƒ£ãƒãƒ«
type IPCChannel = {
    PipeServer: NamedPipeServerStream
    MessageQueue: ConcurrentQueue<IPCMessage>
    IsConnected: bool
}
```

## 4. Claude Codeçµ±åˆæˆ¦ç•¥

### 4.1 çµ±åˆæ–¹é‡ã®é‡è¦ãªåˆ¶ç´„

**é‡è¦**: Claude Codeã¯ç‹¬è‡ªã®ãƒ¢ãƒ‡ãƒ«è¨­å®šãƒ»èªè¨¼ã‚·ã‚¹ãƒ†ãƒ ã‚’æŒã¤ãŸã‚ã€å¤–éƒ¨ã‹ã‚‰ã®ç›´æ¥åˆ¶å¾¡ã¯é™å®šçš„ã€‚ä»¥ä¸‹ã®æ–¹é‡ã§çµ±åˆã™ã‚‹ï¼š

1. **ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•**: `claude code` ã‚³ãƒãƒ³ãƒ‰ã®å¤–éƒ¨ãƒ—ãƒ­ã‚»ã‚¹ã¨ã—ã¦èµ·å‹•
2. **å…¥å‡ºåŠ›ã‚­ãƒ£ãƒ—ãƒãƒ£**: æ¨™æº–å…¥å‡ºåŠ›ã‚’ãƒ‘ã‚¤ãƒ—ã§å–å¾—
3. **ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**: ä¼šè©±é–‹å§‹æ™‚ã«åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦é€ä¿¡
4. **è¨­å®šå§”è­²**: èªè¨¼ãƒ»APIè¨­å®šã¯Claude Codeå´ã§ç®¡ç†

### 4.2 å®Ÿè£…æ–¹æ³•

```fsharp
// ClaudeCodeProcess.fs
type ClaudeCodeInstance = {
    PaneId: string
    Process: Process
    StdinWriter: StreamWriter
    StdoutReader: StreamReader
    SystemPrompt: string option
    IsInitialized: bool
}

let startClaudeCode (paneConfig: PaneConfig) =
    let startInfo = ProcessStartInfo()
    startInfo.FileName <- "claude"
    startInfo.Arguments <- "code"
    startInfo.UseShellExecute <- false
    startInfo.RedirectStandardInput <- true
    startInfo.RedirectStandardOutput <- true
    startInfo.RedirectStandardError <- true
    
    let process = Process.Start(startInfo)
    
    // ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã®åˆæœŸé€ä¿¡
    match paneConfig.SystemPrompt with
    | Some prompt -> 
        process.StandardInput.WriteLine(prompt)
        process.StandardInput.Flush()
    | None -> ()
    
    { PaneId = paneConfig.PaneId
      Process = process
      StdinWriter = process.StandardInput
      StdoutReader = process.StandardOutput
      SystemPrompt = paneConfig.SystemPrompt
      IsInitialized = true }
```

### 4.3 ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé…ä¿¡æˆ¦ç•¥

Claude Codeã¸ã®åˆ¶ç´„ã‚’è€ƒæ…®ã—ã€ä»¥ä¸‹ã®æ®µéšçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’æ¡ç”¨ï¼š

1. **Phase 1**: ä¼šè©±é–‹å§‹æ™‚ã®åˆæœŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ã—ã¦é€ä¿¡
2. **Phase 2**: å®šæœŸçš„ãªãƒªãƒã‚¤ãƒ³ãƒ€ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
3. **Future**: Claude CodeãŒå¤–éƒ¨ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­å®šã‚’ã‚µãƒãƒ¼ãƒˆã—ãŸå ´åˆã®å¯¾å¿œæº–å‚™

## 5. ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼è¨­è¨ˆ

### 5.1 ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ãƒ­ãƒ¼

```
User Input â†’ TUI â†’ KeyBinding â†’ Action â†’ ProcessSupervisor â†’ Claude Worker
    â†“
TUI â† Display â† MessageQueue â† IPC â† Output Processing â† Claude Worker
```

### 5.2 ã‚»ãƒƒã‚·ãƒ§ãƒ³æ°¸ç¶šåŒ–

```fsharp
// ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
type SessionData = {
    SessionId: string
    CreatedAt: DateTime
    UpdatedAt: DateTime
    PaneStates: Map<string, PaneState>
    ConversationHistory: ConversationMessage[]
}

type PaneState = {
    PaneId: string
    Role: string
    IsActive: bool
    LastMessage: string option
    MessageHistory: string[]
    ScrollPosition: int
}

// ä¿å­˜å ´æ‰€: ~/.config/claude-tui/sessions/
```

## 6. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ»ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£

### 6.1 ãƒªã‚½ãƒ¼ã‚¹ä½¿ç”¨é‡ç›®æ¨™

| é …ç›® | ç›®æ¨™å€¤ | ç›£è¦–æ–¹æ³• |
|---|---|---|
| **ãƒ¡ã‚¤ãƒ³ãƒ—ãƒ­ã‚»ã‚¹ãƒ¡ãƒ¢ãƒª** | < 100MB | Process.WorkingSet64 |
| **Claude Workeråˆè¨ˆ** | < 2GB | ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦– |
| **UIå¿œç­”æ€§** | < 100ms | ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¬ãƒ¼ãƒˆç›£è¦– |
| **IPCé…å»¶** | < 10ms | ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— |

### 6.2 æœ€é©åŒ–æˆ¦ç•¥

1. **é…å»¶åˆæœŸåŒ–**: ä½¿ç”¨ã•ã‚Œã‚‹ãƒšã‚¤ãƒ³ã®ã¿Claudeãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•
2. **ãƒ¡ãƒ¢ãƒªãƒ—ãƒ¼ãƒ«**: ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å†åˆ©ç”¨
3. **éåŒæœŸå‡¦ç†**: UIæ›´æ–°ã¨IPCé€šä¿¡ã®åˆ†é›¢
4. **ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**: å®šæœŸçš„ãªãƒ¡ãƒ¢ãƒªã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—

## 7. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãƒ»ä¿¡é ¼æ€§

### 7.1 éšœå®³åˆ†é›¢è¨­è¨ˆ

```fsharp
// éšœå®³ãƒ¬ãƒ™ãƒ«å®šç¾©
type FailureLevel = 
    | PaneLevel      // å˜ä¸€ãƒšã‚¤ãƒ³ã®éšœå®³
    | WorkerLevel    // Claude Workerãƒ—ãƒ­ã‚»ã‚¹ã®éšœå®³  
    | IPCLevel       // é€šä¿¡éšœå®³
    | SystemLevel    // ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ã®éšœå®³

// å¾©æ—§æˆ¦ç•¥
let recoveryStrategy = function
    | PaneLevel -> RestartPane
    | WorkerLevel -> RestartWorkerWithBackoff  
    | IPCLevel -> ReinitializeIPC
    | SystemLevel -> GracefulShutdown
```

### 7.2 ãƒ‡ãƒ¼ã‚¿ä¿è­·

1. **è‡ªå‹•ä¿å­˜**: 30ç§’é–“éš”ã§ã‚»ãƒƒã‚·ãƒ§ãƒ³çŠ¶æ…‹ä¿å­˜
2. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—**: éå»5ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®å±¥æ­´ä¿æŒ
3. **æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯**: èµ·å‹•æ™‚ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«æ¤œè¨¼
4. **å®‰å…¨ãªçµ‚äº†**: Ctrl+Cã§ã®ã‚°ãƒ¬ãƒ¼ã‚¹ãƒ•ãƒ«çµ‚äº†

## 8. é–‹ç™ºãƒ»ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### 8.1 ãƒ†ã‚¹ãƒˆåˆ†é¡

| ãƒ†ãƒ†ã‚¹ãƒˆã‚¿ã‚¤ãƒ— | å†…å®¹ | å®Ÿè¡Œç’°å¢ƒ |
|---|---|---|
| **Unit** | ç´”ç²‹é–¢æ•°ãƒ»ãƒ­ã‚¸ãƒƒã‚¯ | CI + Local |
| **Integration** | ãƒ—ãƒ­ã‚»ã‚¹é–“é€šä¿¡ãƒ»Claudeçµ±åˆ | Local |
| **E2E** | UIæ“ä½œãƒ»ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚·ãƒŠãƒªã‚ª | Manual |
| **Performance** | è² è·ãƒ»ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ | Manual |
| **Stability** | é•·æ™‚é–“ç¨¼åƒ | Manual |

### 8.2 å“è³ªã‚²ãƒ¼ãƒˆ

```yaml
# CI/CDå“è³ªåŸºæº–
criteria:
  unit_test_coverage: "> 80%"
  build_success: "required"
  code_format: "Fantomasé©ç”¨"
  linting: "FSharpLintåŸºæº–æº–æ‹ "
  
# ãƒªãƒªãƒ¼ã‚¹åŸºæº–  
release_criteria:
  e2e_test_pass: "required"
  performance_benchmark: "ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ < 2GB"
  stability_test: "24æ™‚é–“é€£ç¶šç¨¼åƒ"
```

## 9. æ®µéšçš„å®Ÿè£…è¨ˆç”»

### Phase 1: åŸºç›¤æ§‹ç¯‰ (å®Œäº†)
- âœ… UIåŸºç›¤ï¼ˆTerminal.Guiï¼‰
- âœ… 9ãƒšã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
- âœ… Emacsã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
- âœ… è¨­å®šç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- âœ… ãƒ—ãƒ­ã‚»ã‚¹ç›£è¦–åŸºç›¤

### Phase 2: Claudeçµ±åˆ (æ¬¡æ®µéš)
- ğŸ”„ Claude Codeãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•ãƒ»åœæ­¢
- ğŸ”„ æ¨™æº–å…¥å‡ºåŠ›ã‚­ãƒ£ãƒ—ãƒãƒ£
- ğŸ”„ åŸºæœ¬çš„ãªä¼šè©±æ©Ÿèƒ½
- ğŸ”„ ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆé…ä¿¡

### Phase 3: å”èª¿æ©Ÿèƒ½
- â³ ãƒšã‚¤ãƒ³é–“ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å…±æœ‰
- â³ ã‚»ãƒƒã‚·ãƒ§ãƒ³æ°¸ç¶šåŒ–
- â³ è‡ªå‹•å¾©æ—§ã‚·ã‚¹ãƒ†ãƒ 

### Phase 4: é«˜åº¦æ©Ÿèƒ½
- â³ AIãƒãƒ¼ãƒ å”èª¿ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼
- â³ é«˜åº¦ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- â³ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

## 10. æŠ€è¡“ãƒªã‚¹ã‚¯ãƒ»åˆ¶ç´„

### 10.1 Claude Codeä¾å­˜ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | å½±éŸ¿åº¦ | è»½æ¸›ç­– |
|---|---|---|
| **APIä»•æ§˜å¤‰æ›´** | é«˜ | ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢ã§å½±éŸ¿å±€æ‰€åŒ– |
| **èªè¨¼æ–¹å¼å¤‰æ›´** | ä¸­ | Claude Codeå´ã®è¨­å®šã«å§”è­² |
| **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŠ£åŒ–** | ä¸­ | ç›£è¦–ãƒ»è‡ªå‹•å†èµ·å‹•ã§å¯¾å¿œ |
| **ãƒ©ã‚¤ã‚»ãƒ³ã‚¹å¤‰æ›´** | ä½ | ä»£æ›¿çµ±åˆæ–¹æ³•ã®èª¿æŸ» |

### 10.2 æŠ€è¡“åˆ¶ç´„

1. **Terminal.Guiåˆ¶ç´„**: ãƒã‚¦ã‚¹æ“ä½œã‚µãƒãƒ¼ãƒˆé™å®š
2. **ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ åˆ¶ç´„**: Windowséå¯¾å¿œ
3. **ãƒ¡ãƒ¢ãƒªåˆ¶ç´„**: è¤‡æ•°Claudeãƒ—ãƒ­ã‚»ã‚¹ã«ã‚ˆã‚‹ä½¿ç”¨é‡å¢—åŠ 
4. **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯åˆ¶ç´„**: Claude APIä¾å­˜

## 11. æˆåŠŸæŒ‡æ¨™ãƒ»KPI

### 11.1 æŠ€è¡“æŒ‡æ¨™

- **å®‰å®šæ€§**: MTBF > 8æ™‚é–“
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**: UIå¿œç­”æ™‚é–“ < 100ms
- **ãƒªã‚½ãƒ¼ã‚¹åŠ¹ç‡**: ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ < 2GB
- **å¯ç”¨æ€§**: è‡ªå‹•å¾©æ—§ç‡ > 95%

### 11.2 ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£æŒ‡æ¨™

- **å­¦ç¿’ã‚³ã‚¹ãƒˆã®ä½ã•**: åŸºæœ¬æ“ä½œç¿’å¾— < 30åˆ†
- **ä½œæ¥­åŠ¹ç‡å‘ä¸Š**: å¾“æ¥æ¯”20%ä»¥ä¸Šã®ç”Ÿç”£æ€§å‘ä¸Š
- **ã‚¨ãƒ©ãƒ¼ç‡ã®ä½ã•**: æ“ä½œãƒŸã‚¹ < 5%

---

## çµè«–

æœ¬ã‚°ãƒ©ãƒ³ãƒ‰ãƒ‡ã‚¶ã‚¤ãƒ³ã¯ã€Claude Codeçµ±åˆTUIã‚¨ãƒ‡ã‚£ã‚¿ã®å®Ÿç¾å¯èƒ½æ€§ã‚’é‡è¦–ã—ã€æ®µéšçš„ãªå®Ÿè£…ã‚’å‰æã¨ã—ãŸç¾å®Ÿçš„ãªè¨­è¨ˆã§ã™ã€‚ç‰¹ã«Claude Codeã®åˆ¶ç´„ã‚’å—ã‘å…¥ã‚Œã¤ã¤ã€ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã‚ˆã‚Šä¿¡é ¼æ€§ã¨æ‹¡å¼µæ€§ã‚’ç¢ºä¿ã—ã¦ã„ã¾ã™ã€‚

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã¨ã—ã¦ã€Phase 2ã®Claudeçµ±åˆæ©Ÿèƒ½ã®è©³ç´°è¨­è¨ˆã¨å®Ÿè£…ã«ç€æ‰‹ã—ã¾ã™ã€‚