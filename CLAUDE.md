# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

Claude Codeçµ±åˆTUIã‚¨ãƒ‡ã‚£ã‚¿ã®é–‹ç™ºãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã€‚F#/.NET8 + Terminal.Guiã‚’ä½¿ç”¨ã—ã¦ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ãªTUIã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ã„ã‚‹ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **è¨€èª**: F# (.NET 8)
- **UIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯**: Terminal.Gui 1.5.0
- **å¯¾è±¡ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ **: Linux, macOS (Windowså¯¾è±¡å¤–)
- **é…å¸ƒ**: .NET Single File Publish (å°†æ¥çš„ã«ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£å¯¾å¿œäºˆå®š)

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
src/                         # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
â”œâ”€â”€ Program.fs               # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆãƒ»UIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå®šç¾© (225è¡Œ)
â”œâ”€â”€ ColorSchemes.fs          # ãƒ­ãƒ¼ãƒ«åˆ¥ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ å®šç¾© (27è¡Œ)
â”œâ”€â”€ KeyBindings.fs           # Emacsã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ  (246è¡Œ)
â”œâ”€â”€ ClaudeCodeProcess.fs     # Claude Codeãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†ãƒ»ã‚»ãƒƒã‚·ãƒ§ãƒ³åˆ¶å¾¡ (190è¡Œ)
â”œâ”€â”€ ProcessSupervisor.fs     # ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢ãƒ»ç›£è¦–ãƒ»è‡ªå‹•å¾©æ—§ã‚·ã‚¹ãƒ†ãƒ  (422è¡Œ)
â”œâ”€â”€ Logger.fs                # åŒ…æ‹¬çš„ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ  (71è¡Œ)
â”œâ”€â”€ fcode.fsproj             # F#ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ bin/                     # ãƒ“ãƒ«ãƒ‰å‡ºåŠ›
â””â”€â”€ obj/                     # ãƒ“ãƒ«ãƒ‰ä¸­é–“ãƒ•ã‚¡ã‚¤ãƒ«

tests/                       # å˜ä½“ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ KeyBindingsTests.fs      # ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ ColorSchemesTests.fs     # ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
â”œâ”€â”€ fcode.Tests.fsproj       # ãƒ†ã‚¹ãƒˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â””â”€â”€ Program.fs               # ãƒ†ã‚¹ãƒˆã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆ

docs/                        # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ–‡æ›¸
â”œâ”€â”€ TODO.md                  # è©³ç´°é–‹ç™ºã‚¿ã‚¹ã‚¯ç®¡ç†
â”œâ”€â”€ PRD.md                   # ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆè¦ä»¶å®šç¾©
â””â”€â”€ ui_layout.md             # UIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆè¨­è¨ˆè©³ç´°
```

## é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ãƒ“ãƒ«ãƒ‰
dotnet build src/fcode.fsproj

# å®Ÿè¡Œ
dotnet run --project src/fcode.fsproj

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
dotnet test tests/fcode.Tests.fsproj

# ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆä»˜ããƒ†ã‚¹ãƒˆ
dotnet test tests/fcode.Tests.fsproj --collect:"XPlat Code Coverage"

# å˜ä¸€ãƒ•ã‚¡ã‚¤ãƒ«ãƒ‘ãƒ–ãƒªãƒƒã‚·ãƒ¥
dotnet publish src/fcode.fsproj -c Release -r linux-x64 --self-contained true -p:PublishSingleFile=true
```

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

### UIãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹æˆ
- **ä¼šè©±ãƒšã‚¤ãƒ³**: å·¦ç«¯å›ºå®šï¼ˆ60åˆ—å¹…ï¼‰ã€ãƒ•ãƒ©ãƒƒãƒˆè¡¨ç¤ºã§ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä¼šè©±ä¸€è¦§
- **ãƒãƒ«ãƒãƒšã‚¤ãƒ³**: å³å´ã‚¨ãƒªã‚¢ã«é–‹ç™ºè€…ãƒ»QAãƒ»UXãƒ»PMç”¨ãƒšã‚¤ãƒ³ã‚’é…ç½®
- **ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ¯”ç‡**: ä¸Šæ®µ40%(dev1-3) / ä¸­æ®µ40%(qa1-2,ux) / ä¸‹æ®µ20%(PMã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³)

### å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½ï¼ˆ100%å®Œäº†ï¼‰
- **UIåŸºç›¤å®Œå…¨å®Ÿè£…**: 8ãƒšã‚¤ãƒ³ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆä¼šè©±ã€dev1-3ã€qa1-2ã€uxã€PMã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼‰
- **UIæ”¹å–„å®Œäº†**: ä¼šè©±ãƒšã‚¤ãƒ³60åˆ—å¹…ã€äºŒé‡æ è§£æ¶ˆã€çµ±ä¸€ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ 
- **Emacsã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚·ã‚¹ãƒ†ãƒ **: ãƒãƒ«ãƒã‚­ãƒ¼ã‚·ãƒ¼ã‚±ãƒ³ã‚¹å®Œå…¨å¯¾å¿œï¼ˆ246è¡Œï¼‰
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: ä¸Šæ®µ40%/ä¸­æ®µ40%/ä¸‹æ®µ20%æ¯”ç‡
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãƒ˜ãƒ«ãƒ—ã‚·ã‚¹ãƒ†ãƒ **: Ctrl+X Hã§ã®æ“ä½œã‚¬ã‚¤ãƒ‰
- **åŒ…æ‹¬çš„ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ **: 4æ®µéšãƒ­ã‚°ãƒ¬ãƒ™ãƒ«ã€ã‚«ãƒ†ã‚´ãƒªåˆ¥å‡ºåŠ›ï¼ˆ71è¡Œï¼‰
- **ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸºç›¤**: ProcessSupervisorå®Œå…¨å®Ÿè£…ï¼ˆ422è¡Œï¼‰
- **åŒ…æ‹¬çš„å˜ä½“ãƒ†ã‚¹ãƒˆã‚¹ã‚¤ãƒ¼ãƒˆ**: NUnitã€43ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ã€ã‚«ãƒãƒ¬ãƒƒã‚¸100%é”æˆ

### é–‹ç™ºä¸­æ©Ÿèƒ½ï¼ˆ80%å®Œäº†ï¼‰
- **Claude Code CLIçµ±åˆ**: ãƒ—ãƒ­ã‚»ã‚¹èµ·å‹•åŸºç›¤å®Œæˆã€TextViewåˆæœŸåŒ–ã«èª²é¡Œ
- **SessionManager**: è¤‡æ•°ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†åŸºç›¤å®Ÿè£…æ¸ˆã¿ï¼ˆ190è¡Œï¼‰
- **I/Oçµ±åˆ**: æ¨™æº–å…¥å‡ºåŠ›ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ»UIè¡¨ç¤ºæ©Ÿèƒ½ï¼ˆå®Ÿè£…ä¸­ï¼‰

### ç·Šæ€¥èª²é¡Œï¼ˆç”»é¢è¡¨ç¤ºæœ€å„ªå…ˆï¼‰
- **TextViewåˆæœŸåŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œ**: "TextViewãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“"ã‚¨ãƒ©ãƒ¼ï¼ˆ100%ç™ºç”Ÿï¼‰
- **Claude Codeå‡ºåŠ›è¡¨ç¤º**: ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ I/Oçµ±åˆã¨TUIè¡¨ç¤ºæ©Ÿèƒ½
- **åŸºæœ¬å‹•ä½œç¢ºèª**: dev1ãƒšã‚¤ãƒ³ã§ã®å®Œå…¨ãªClaudeå¯¾è©±å®Ÿç¾

### å¾Œå›ã—æ©Ÿèƒ½ï¼ˆå‹•ä½œç¢ºèªå®Œäº†å¾Œï¼‰
- tmuxãƒ©ã‚¤ã‚¯ãªã‚»ãƒƒã‚·ãƒ§ãƒ³æ°¸ç¶šåŒ–æ©Ÿèƒ½
- å¥å…¨æ€§ç›£è¦–ãƒ»è‡ªå‹•å¾©æ—§ã‚·ã‚¹ãƒ†ãƒ 
- ãƒšã‚¤ãƒ³é–“ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆå…±æœ‰æ©Ÿèƒ½
- ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆå”èª¿ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

## é‡è¦ãªå®Ÿè£…æ–¹é‡

- Terminal.Guiã®FrameViewã‚’æ´»ç”¨ã—ãŸãƒšã‚¤ãƒ³åˆ†å‰²
- ä¼šè©±ãƒšã‚¤ãƒ³ã¯ãƒœãƒ¼ãƒ€ãƒ¼ãƒ¬ã‚¹ï¼ˆãƒ•ãƒ©ãƒƒãƒˆè¡¨ç¤ºï¼‰
- Claude Code CLIã¨ã®å¤–éƒ¨ãƒ—ãƒ­ã‚»ã‚¹é€£æºãŒå‰æ
- èªè¨¼ãƒ»APIç®¡ç†ã¯Claude Code CLIå´ã«å§”ä»»

## å¤–éƒ¨ä¾å­˜

- Claude Code CLIï¼ˆå¿…é ˆï¼‰: ãƒ­ãƒ¼ã‚«ãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ¸ˆã¿å‰æ
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«: `~/.config/claude-tui/config.toml`ï¼ˆäºˆå®šï¼‰

## ç¾åœ¨ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçŠ¶æ…‹ï¼ˆ2025-06-25ï¼‰

### æœ€æ–°ã®å®Ÿè£…çŠ¶æ³
- **ç·å®Ÿè£…ãƒ©ã‚¤ãƒ³æ•°**: 1180è¡Œ (src/), 472è¡Œ (tests/)
- **ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸**: 43ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹ / 100%ãƒ‘ã‚¹
- **ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸºç›¤**: UIã€ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã€ãƒ­ã‚°ã€ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢ã™ã¹ã¦å®Œæˆ
- **èª²é¡Œ**: Claude Codeç”»é¢è¡¨ç¤ºæ©Ÿèƒ½ï¼ˆTextViewåˆæœŸåŒ–å•é¡Œï¼‰

### é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚ºå†ç·¨æˆ: å‹•ä½œç¢ºèªæœ€å„ªå…ˆ
**æ–°ã—ã„é–‹ç™ºæ–¹é‡**: ã‚»ãƒƒã‚·ãƒ§ãƒ³ç¶­æŒãƒ»å …ç‰¢æ€§ã¯å¾Œå›ã—ã€ã¾ãšç”»é¢è¡¨ç¤ºã‚’å®Ÿç¾

1. **Phase 1 (æœ€å„ªå…ˆ)**: Claude Codeç”»é¢è¡¨ç¤ºã®å®Ÿç¾
   - TextViewåˆæœŸåŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œè§£æ±º
   - I/Oçµ±åˆå®Ÿè£…ï¼ˆæ¨™æº–å…¥å‡ºåŠ›ã‚­ãƒ£ãƒ—ãƒãƒ£ãƒ»TUIè¡¨ç¤ºï¼‰
   - dev1ãƒšã‚¤ãƒ³ã§ã®åŸºæœ¬å‹•ä½œç¢ºèª

2. **Phase 2 (å®‰å®šåŒ–)**: è¤‡æ•°ãƒšã‚¤ãƒ³å±•é–‹
   - å…¨ãƒšã‚¤ãƒ³å¯¾å¿œã¨ã‚»ãƒƒã‚·ãƒ§ãƒ³ç®¡ç†å®‰å®šåŒ–

3. **Phase 3 (é«˜åº¦æ©Ÿèƒ½)**: ãƒšã‚¤ãƒ³é–“é€£æºãƒ»AIå”èª¿æ©Ÿèƒ½

### æŠ€è¡“çš„æº–å‚™çŠ¶æ³
- âœ… UIåŸºç›¤ï¼ˆTerminal.Gui 1.5.0ï¼‰å®Œå…¨å®Ÿè£…ãƒ»å®‰å®šå‹•ä½œ
- âœ… F#/.NET8ãƒ—ãƒ­ã‚»ã‚¹ç®¡ç†åŸºç›¤ï¼ˆSessionManagerå®Ÿè£…æ¸ˆã¿ï¼‰
- âœ… ãƒ—ãƒ­ã‚»ã‚¹åˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£åŸºç›¤ï¼ˆProcessSupervisor 422è¡Œï¼‰
- âœ… åŒ…æ‹¬çš„ãƒ†ã‚¹ãƒˆã‚¤ãƒ³ãƒ•ãƒ©ãƒ»ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ å®Œæˆ
- ğŸš¨ TextViewåˆæœŸåŒ–å•é¡ŒãŒç”»é¢è¡¨ç¤ºã‚’é˜»å®³ä¸­

### ç›´è¿‘ã®å®Œäº†ä½œæ¥­ï¼ˆ2025-06-25ï¼‰
- **ProcessSupervisor.fså®Ÿè£…å®Œäº†** (422è¡Œ) - commit 23f987a
- **TODO.mdå„ªå…ˆé †ä½æ•´ç†** - ç”»é¢è¡¨ç¤ºæœ€å„ªå…ˆã«å†æ§‹æˆ - commit aae2cc8
- **ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ–‡æ›¸æ›´æ–°** - ãƒ†ã‚¹ãƒˆæ‰‹æ³•çµ±ä¸€ã€å¤‰æ•°åä¿®æ­£ - commit 6b98d03

### æ¬¡æœŸé–‹ç™ºã‚¿ã‚¹ã‚¯ï¼ˆæœ€å„ªå…ˆï¼‰
1. TextViewåˆæœŸåŒ–ã‚¿ã‚¤ãƒŸãƒ³ã‚°å•é¡Œã®è§£æ±º
2. Claude Codeæ¨™æº–å‡ºåŠ›ã‚­ãƒ£ãƒ—ãƒãƒ£æ©Ÿèƒ½å®Ÿè£…
3. dev1ãƒšã‚¤ãƒ³ã§ã®åŸºæœ¬å¯¾è©±å‹•ä½œç¢ºèª

## é–‹ç™ºæ™‚æ³¨æ„äº‹é …

- **é‡è¤‡å›é¿**: github issue ã‚„ PR ã‚’ç«‹ã¦ã‚‹æ™‚ã¯é‡è¤‡ãŒç„¡ã„ã‹ç¢ºèªã—ã¦ã‹ã‚‰å¯¾å¿œã—ã¦
- **PRç®¡ç†**: PR ã¯ issue ã®å®Ÿè£…ã‚’å¯¾å¿œã—ãŸå ´åˆé–¢é€£ä»˜ã‘ã¦ãŠã„ã¦

## ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¦ç´„

### F# ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰

#### `new` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã®ä½¿ç”¨æ–¹é‡
ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ F# Compiler ã®æ¨å¥¨ã«å¾“ã„ã€IDisposableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒªã‚½ãƒ¼ã‚¹ç®¡ç†ã‚’æ˜ç¤ºçš„ã«è¡¨ç¾ã™ã‚‹æ–¹é‡ã‚’æ¡ç”¨ï¼š

**IDisposableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ** - `new` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰å¿…é ˆ:
```fsharp
let frameView = new FrameView("test")
let textView = new TextView()
let supervisor = new ProcessSupervisor(config)
```

**é€šå¸¸ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ** - `new` ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰çœç•¥:
```fsharp
let handler = EmacsKeyHandler(panes, sessionManager)
let manager = SessionManager()
```

**ç†ç”±**: IDisposableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ãƒªã‚½ãƒ¼ã‚¹æ‰€æœ‰æ¨©ã‚’æ˜ç¢ºã«ã—ã€ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã‚’é˜²æ­¢ã™ã‚‹ãŸã‚

#### FSharpLintè¨­å®š

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®`.fsharplint.json`ã§æ¨™æº–çš„ãªå“è³ªãƒ«ãƒ¼ãƒ«ã‚’è¨­å®š:

- **redundantNewKeyword**: ç„¡åŠ¹åŒ–ï¼ˆIDisposableã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®newä¿æŒï¼‰
- **functionLength**: é–¢æ•°é•·åˆ¶é™ï¼ˆæœ€å¤§80è¡Œï¼‰
- **cyclomaticComplexity**: è¤‡é›‘åº¦åˆ¶é™ï¼ˆæœ€å¤§15ï¼‰
- **unusedValue**: æœªä½¿ç”¨å¤‰æ•°æ¤œå‡º
- **unusedOpenStatement**: æœªä½¿ç”¨openã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆæ¤œå‡º
- **å‘½åè¦ç´„**: å…¨ãƒ«ãƒ¼ãƒ«æœ‰åŠ¹ï¼ˆcapitalsã€parametersç­‰ï¼‰
- **suggestions**: ã‚³ãƒ¼ãƒ‰æ”¹å–„ææ¡ˆ
- **ãã®ä»–**: æ¨™æº–å“è³ªãƒ«ãƒ¼ãƒ«å…¨èˆ¬

#### ãƒ†ã‚¹ãƒˆç’°å¢ƒè¨­å®š

CIç’°å¢ƒã§ã¯Terminal.GuiåˆæœŸåŒ–ã‚’ã‚¹ã‚­ãƒƒãƒ—:
```fsharp
let isCI = not (isNull (System.Environment.GetEnvironmentVariable("CI")))
if not isCI then Application.Init()
```

### CI/CD ãƒ†ã‚¹ãƒˆã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

#### Terminal.Gui CIç’°å¢ƒå¯¾å¿œãƒ‘ã‚¿ãƒ¼ãƒ³

**èƒŒæ™¯**: Terminal.Guiã¯CIç’°å¢ƒï¼ˆãƒ˜ãƒƒãƒ‰ãƒ¬ã‚¹ç’°å¢ƒï¼‰ã§åˆæœŸåŒ–æ™‚ã«ãƒãƒ³ã‚°ã™ã‚‹å•é¡ŒãŒã‚ã‚Šã€æ¥­ç•Œæ¨™æº–çš„ãªå¯¾å¿œã¨ã—ã¦**UIä¾å­˜æ€§åˆ†é›¢ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£**ã‚’æ¡ç”¨ã€‚

**å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³**:

```fsharp
// 1. ãƒ†ã‚¹ãƒˆå¯èƒ½ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å®šç¾©
type ITestableView =
    abstract member SetColorScheme: ColorScheme -> unit

// 2. CIç’°å¢ƒè‡ªå‹•åˆ¤å®š
let isCI = not (isNull (System.Environment.GetEnvironmentVariable("CI")))

// 3. ç’°å¢ƒåˆ¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆç”Ÿæˆ
let createTestableFrameView (title: string) =
    if isCI then
        // CIç’°å¢ƒ: è»½é‡ãƒ¢ãƒƒã‚¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
        new TestFrameView(title) :> ITestableView
    else
        // é–‹ç™ºç’°å¢ƒ: å®Ÿéš›ã®Terminal.Gui
        let frameView = new FrameView(title)
        frameView :> ITestableView

// 4. UIéä¾å­˜ãƒ­ã‚¸ãƒƒã‚¯åˆ†é›¢
let getSchemeByRole (role: string) =
    match role with
    | "dev" -> ColorScheme.dev
    | "qa" -> ColorScheme.qa
    | _ -> ColorScheme.Default

let applySchemeByRoleTestable (view: ITestableView) (role: string) =
    let scheme = getSchemeByRole role
    view.SetColorScheme(scheme)
```

**ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ**:

```bash
# CIç’°å¢ƒï¼ˆè‡ªå‹•åˆ¤å®šï¼‰
CI=true dotnet test tests/fcode.Tests.fsproj
# çµæœ: Passed: 11, Failed: 0, Duration: 11ms

# é–‹ç™ºç’°å¢ƒ
dotnet test tests/fcode.Tests.fsproj  
# çµæœ: å®Ÿéš›ã®Terminal.Guiä½¿ç”¨
```

**åˆ©ç‚¹**:
- âœ… **é«˜é€Ÿ**: CIç’°å¢ƒã§TUIåˆæœŸåŒ–å›é¿ï¼ˆ11mså®Ÿè¡Œï¼‰
- âœ… **å®‰å®š**: UIä¾å­˜æ€§åˆ†é›¢ã§ãƒ†ã‚¹ãƒˆä¿¡é ¼æ€§å‘ä¸Š
- âœ… **å®Ÿç”¨çš„**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè³ªçš„æ¤œè¨¼
- âœ… **ä¿å®ˆæ€§**: ncursesç³»OSSã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ¨™æº–ãƒ‘ã‚¿ãƒ¼ãƒ³

**ä»–OSSãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã®æ¡ç”¨ä¾‹**:
- **ncursesã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³**: ãƒ­ã‚¸ãƒƒã‚¯/UIåˆ†é›¢ãŒæ¨å¥¨ãƒ‘ã‚¿ãƒ¼ãƒ³
- **Rich (Python)**: `TTY_COMPATIBLE=1`ç’°å¢ƒå¤‰æ•°ã§ã®å¼·åˆ¶å¯¾å¿œ
- **Hecate**: ä»®æƒ³ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¨ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã«ã‚ˆã‚‹çµ±åˆãƒ†ã‚¹ãƒˆ

#### é–¢é€£è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
- `.fsharplint.json`: FSharpLintæ¨™æº–å½¢å¼ã§ã®å“è³ªãƒ«ãƒ¼ãƒ«è¨­å®š
- CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³: F# Compiler + FSharpLintå“è³ªãƒã‚§ãƒƒã‚¯
- `.github/workflows/ci.yml`: Linux/macOSè‡ªå‹•ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ