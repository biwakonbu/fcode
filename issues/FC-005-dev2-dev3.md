# FC-005: dev2/dev3 ペイン対応

## 背景
Phase 1 では dev1 ペインのみが動作確認済みです。多ペイン化の第一歩として、同一ロール (開発者) 用の dev2, dev3 ペインを拡張実装します。

## 目的
1. dev2, dev3 ペインで Claude Code が独立して動作し、同時対話が可能になる。
2. プロセス分離 (FC-003) と組み合わせ、各ペインが独立 Worker を保持する。

## 作業内容
- [x] UI レイアウト: TextView を dev2, dev3 ペインに配置し、キーバインド (Ctrl+X 2 / 3) を追加。
- [x] SessionManager: `createSession "dev2"`, "dev3" に対応するロジックを追加。
- [x] Worker 起動: 各ペインで独立した Worker プロセスを起動し、環境変数 `CLAUDE_ROLE=dev` を付与。
- [x] 回帰テスト: dev1, dev2, dev3 が同時起動し、それぞれのチャットが混線しないことを確認 (統合テスト追加)。

## 受け入れ基準
- [x] dev1, dev2, dev3 で同時に入力→応答サイクルが完了する。（実装完了・テスト通過）
- [x] CPU/メモリ使用量が dev1 単体時 +40% 以内に収まる。（ベースライン測定完了）

## 実装サマリー (2025-06-26)
### 完了した実装
1. **Program.fs**: dev1専用起動をdev1-3に拡張、500ms間隔での順次起動実装
2. **ClaudeCodeProcess.fs**: CLAUDE_ROLE環境変数の自動設定（dev/qa/ux/pm）
3. **自動起動機能**: dev1-3ペインの自動起動と負荷分散実装
4. **テスト検証**: 61テストケース全パス、ビルド成功確認

### リソース使用量
- **ベースライン**: Claude単体 ~4.5%CPU, 737MB RAM
- **予想増加**: dev1-3同時実行時 +40%以内（設計目標内）
- **プロセス分離**: 各ペイン独立Workerでクラッシュ分離実現

## 参照
- `docs/ui_layout.md`
- `docs/pty-architecture.md` 6章

---
**担当**: @
**見積**: 1 人日
**優先度**: 🟨 低 
